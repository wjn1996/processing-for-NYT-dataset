#统计实体对数量
#远程监督数据集非均衡性
with open('train_data.txt', 'r', encoding='utf-8') as fr:
    data = fr.readlines()
with open('test_data.txt', 'r', encoding='utf-8') as fr:
    data += fr.readlines()
statistic = dict()
labels = dict()
for i in data:
    d = eval(i.replace('\n', ''))
    entity_pair_num = len(d['sentence'])
    relation = d['relation']
    if entity_pair_num in statistic.keys():
        statistic[entity_pair_num] += 1
    else:
        statistic[entity_pair_num] = 1
    if relation in labels.keys():
        labels[relation] += 1
    else:
        labels[relation] = 1 
print('实体对总数：', len(data))
print('关系标签\t','实体对数量\t','所占比例')
for i in sorted(labels.keys()):
    print(i, '\t', labels[i], '\t', float(labels[i]/len(data)))
print('\n=======\n实体对共现句子数量\t','实体对数量\t','所占比例')
for i in sorted(statistic.keys()):
    print(i, '\t', statistic[i], '\t', float(statistic[i]/len(data)))


#####nyt数据集统计结果########
# 实体对总数： 233081
# 关系标签         实体对数量      所占比例
# 0        212884          0.9133477203204037
# 1        518     0.0022224033705021003
# 5        1       4.290353997108301e-06
# 6        210     0.0009009743393927433
# 7        3       1.2871061991324904e-05
# 8        1511    0.006482724889630643
# 9        768     0.0032949918697791755
# 12       9       3.861318597397471e-05
# 13       9       3.861318597397471e-05
# 15       2       8.580707994216602e-06
# 17       80      0.00034322831976866413
# 18       84      0.0003603897357570973
# 20       1       4.290353997108301e-06
# 22       3       1.2871061991324904e-05
# 23       187     0.0008022961974592524
# 24       397     0.0017032705368519956
# 27       2       8.580707994216602e-06
# 28       2703    0.011596826854183739
# 29       1557    0.006680081173497625
# 31       4       1.7161415988433205e-05
# 33       59      0.0002531308858293898
# 34       3       1.2871061991324904e-05
# 35       28      0.00012012991191903244
# 36       2507    0.010755917470750512
# 37       29      0.00012442026591614073
# 42       2       8.580707994216602e-06
# 43       3       1.2871061991324904e-05
# 45       7       3.003247797975811e-05
# 47       167     0.0007164891175170863
# 48       8553    0.0366953977372673
# 49       397     0.0017032705368519956
# 50       237     0.0010168138973146675
# 51       2       8.580707994216602e-06
# 53       72      0.0003089054877917977
# 54       57      0.0002445501778351732
# 55       22      9.438778793638263e-05
# 56       3       1.2871061991324904e-05

# =======
# 实体对共现句子数量       实体对数量      所占比例
# 1        180177          0.7730231121369824
# 2        28649   0.12291435166315573
# 3        8085    0.034687512066620615
# 4        4947    0.021224381223694768
# 5        2215    0.009503134103594888
# 6        1841    0.007898541708676383
# 7        979     0.004200256563169027
# 8        1007    0.00432038647508806
# 9        621     0.0026643098322042553
# 10       581     0.0024926956723199233
# 11       370     0.0015874309789300715
# 12       383     0.0016432055808924795
# 13       273     0.0011712666412105662
# 14       302     0.001295686907126707
# 15       195     0.0008366190294361187
# 16       236     0.0010125235433175591
# 17       140     0.0006006495595951622
# 18       170     0.0007293601795084113
# 19       119     0.0005105521256558879
# 20       108     0.00046335823168769657
# 21       85      0.0003646800897542056
# 22       105     0.00045048716969637166
# 23       50      0.00021451769985541508
# 24       92      0.0003947125677339637
# 25       43      0.00018448522187565697
# 26       73      0.000313195841788906
# 27       51      0.00021880805385252338
# 28       65      0.0002788730098120396
# 29       49      0.00021022734585830676
# 30       41      0.00017590451388144036
# 31       31      0.00013300097391035734
# 32       47      0.00020164663786409017
# 33       23      9.867814193349093e-05
# 34       40      0.00017161415988433207
# 35       24      0.00010296849593059923
# 36       42      0.00018019486787854865
# 37       20      8.580707994216603e-05
# 38       29      0.00012442026591614073
# 39       14      6.006495595951622e-05
# 40       25      0.00010725884992770754
# 41       11      4.719389396819132e-05
# 42       24      0.00010296849593059923
# 43       12      5.148424796529962e-05
# 44       25      0.00010725884992770754
# 45       22      9.438778793638263e-05
# 46       14      6.006495595951622e-05
# 47       11      4.719389396819132e-05
# 48       19      8.151672594505773e-05
# 49       13      5.577460196240792e-05
# 50       17      7.293601795084113e-05
# 51       12      5.148424796529962e-05
# 52       15      6.435530995662452e-05
# 53       9       3.861318597397471e-05
# 54       15      6.435530995662452e-05
# 55       10      4.2903539971083016e-05
# 56       11      4.719389396819132e-05
# 57       4       1.7161415988433205e-05
# 58       7       3.003247797975811e-05
# 59       8       3.432283197686641e-05
# 60       13      5.577460196240792e-05
# 61       9       3.861318597397471e-05
# 62       14      6.006495595951622e-05
# 63       4       1.7161415988433205e-05
# 64       14      6.006495595951622e-05
# 65       8       3.432283197686641e-05
# 66       7       3.003247797975811e-05
# 67       5       2.1451769985541508e-05
# 68       11      4.719389396819132e-05
# 69       8       3.432283197686641e-05
# 70       6       2.574212398264981e-05
# 71       5       2.1451769985541508e-05
# 72       4       1.7161415988433205e-05
# 73       4       1.7161415988433205e-05
# 74       4       1.7161415988433205e-05
# 75       3       1.2871061991324904e-05
# 76       5       2.1451769985541508e-05
# 77       5       2.1451769985541508e-05
# 78       6       2.574212398264981e-05
# 79       1       4.290353997108301e-06
# 80       11      4.719389396819132e-05
# 81       1       4.290353997108301e-06
# 82       9       3.861318597397471e-05
# 83       13      5.577460196240792e-05
# 84       6       2.574212398264981e-05
# 86       5       2.1451769985541508e-05
# 87       7       3.003247797975811e-05
# 88       9       3.861318597397471e-05
# 89       2       8.580707994216602e-06
# 90       4       1.7161415988433205e-05
# 91       2       8.580707994216602e-06
# 92       9       3.861318597397471e-05
# 93       3       1.2871061991324904e-05
# 94       2       8.580707994216602e-06
# 95       5       2.1451769985541508e-05
# 96       9       3.861318597397471e-05
# 97       6       2.574212398264981e-05
# 98       6       2.574212398264981e-05
# 99       3       1.2871061991324904e-05
# 100      5       2.1451769985541508e-05
# 101      1       4.290353997108301e-06
# 102      3       1.2871061991324904e-05
# 103      6       2.574212398264981e-05
# 104      4       1.7161415988433205e-05
# 105      2       8.580707994216602e-06
# 106      2       8.580707994216602e-06
# 108      2       8.580707994216602e-06
# 109      4       1.7161415988433205e-05
# 110      5       2.1451769985541508e-05
# 111      5       2.1451769985541508e-05
# 112      2       8.580707994216602e-06
# 113      5       2.1451769985541508e-05
# 114      1       4.290353997108301e-06
# 116      1       4.290353997108301e-06
# 117      3       1.2871061991324904e-05
# 118      2       8.580707994216602e-06
# 120      6       2.574212398264981e-05
# 121      3       1.2871061991324904e-05
# 122      4       1.7161415988433205e-05
# 123      1       4.290353997108301e-06
# 125      4       1.7161415988433205e-05
# 126      1       4.290353997108301e-06
# 128      4       1.7161415988433205e-05
# 129      2       8.580707994216602e-06
# 130      3       1.2871061991324904e-05
# 131      1       4.290353997108301e-06
# 132      1       4.290353997108301e-06
# 133      2       8.580707994216602e-06
# 134      5       2.1451769985541508e-05
# 135      2       8.580707994216602e-06
# 137      2       8.580707994216602e-06
# 138      1       4.290353997108301e-06
# 140      3       1.2871061991324904e-05
# 141      2       8.580707994216602e-06
# 142      1       4.290353997108301e-06
# 143      2       8.580707994216602e-06
# 144      2       8.580707994216602e-06
# 148      4       1.7161415988433205e-05
# 149      2       8.580707994216602e-06
# 150      6       2.574212398264981e-05
# 152      1       4.290353997108301e-06
# 154      2       8.580707994216602e-06
# 156      1       4.290353997108301e-06
# 158      1       4.290353997108301e-06
# 160      2       8.580707994216602e-06
# 161      2       8.580707994216602e-06
# 162      1       4.290353997108301e-06
# 166      3       1.2871061991324904e-05
# 167      1       4.290353997108301e-06
# 171      1       4.290353997108301e-06
# 174      4       1.7161415988433205e-05
# 176      3       1.2871061991324904e-05
# 178      1       4.290353997108301e-06
# 179      1       4.290353997108301e-06
# 180      1       4.290353997108301e-06
# 186      1       4.290353997108301e-06
# 189      1       4.290353997108301e-06
# 190      4       1.7161415988433205e-05
# 192      1       4.290353997108301e-06
# 194      1       4.290353997108301e-06
# 197      1       4.290353997108301e-06
# 198      2       8.580707994216602e-06
# 202      2       8.580707994216602e-06
# 204      1       4.290353997108301e-06
# 205      1       4.290353997108301e-06
# 215      1       4.290353997108301e-06
# 220      1       4.290353997108301e-06
# 221      3       1.2871061991324904e-05
# 228      2       8.580707994216602e-06
# 231      1       4.290353997108301e-06
# 232      1       4.290353997108301e-06
# 240      1       4.290353997108301e-06
# 241      1       4.290353997108301e-06
# 244      1       4.290353997108301e-06
# 248      2       8.580707994216602e-06
# 250      2       8.580707994216602e-06
# 251      1       4.290353997108301e-06
# 252      2       8.580707994216602e-06
# 255      1       4.290353997108301e-06
# 256      1       4.290353997108301e-06
# 268      1       4.290353997108301e-06
# 274      1       4.290353997108301e-06
# 284      3       1.2871061991324904e-05
# 285      1       4.290353997108301e-06
# 288      1       4.290353997108301e-06
# 295      1       4.290353997108301e-06
# 305      1       4.290353997108301e-06
# 306      1       4.290353997108301e-06
# 314      2       8.580707994216602e-06
# 316      1       4.290353997108301e-06
# 318      1       4.290353997108301e-06
# 320      1       4.290353997108301e-06
# 322      2       8.580707994216602e-06
# 325      1       4.290353997108301e-06
# 341      1       4.290353997108301e-06
# 343      1       4.290353997108301e-06
# 344      1       4.290353997108301e-06
# 354      2       8.580707994216602e-06
# 355      4       1.7161415988433205e-05
# 363      1       4.290353997108301e-06
# 373      2       8.580707994216602e-06
# 376      1       4.290353997108301e-06
# 381      1       4.290353997108301e-06
# 388      1       4.290353997108301e-06
# 412      1       4.290353997108301e-06
# 420      1       4.290353997108301e-06
# 432      3       1.2871061991324904e-05
# 433      1       4.290353997108301e-06
# 436      1       4.290353997108301e-06
# 450      2       8.580707994216602e-06
# 454      1       4.290353997108301e-06
# 456      4       1.7161415988433205e-05
# 476      1       4.290353997108301e-06
# 484      1       4.290353997108301e-06